void placeEnemies() {
  if (levelIndex == 98) { //performance test level
    genEnemy(2, 1000, 300);
    
    genEnemy(0, 1200, 200);
    genEnemy(0, 1200, 400);
    genEnemy(0, 1200, 100);
    genEnemy(0, 1200, 500);
    genEnemy(0, 1200, 600);
    genEnemy(0, 1200, 0);
    
    genEnemy(3, 1300, 50);
    genEnemy(3, 1300, 225);
    genEnemy(3, 1300, 400);
    genEnemy(3, 1300, 575);
    
    genEnemy(0, 1400, 100);
    genEnemy(0, 1400, 300);
    genEnemy(0, 1400, 500);
    
    genEnemy(1, 1600, 50);
    genEnemy(1, 1600, 225);
    genEnemy(1, 1600, 400);
    genEnemy(1, 1600, 575);
    
    genEnemy(0, 1800, 100);
    genEnemy(0, 1800, 300);
    genEnemy(0, 1800, 500);
    
    genEnemy(3, 2000, 50);
    genEnemy(3, 2000, 225);
    genEnemy(3, 2000, 400);
    genEnemy(3, 2000, 575);
    
    genEnemy(1, 2200, 100);
    genEnemy(2, 2200, 300);
    genEnemy(1, 2200, 500);
    
    genEnemy(0, 2400, 50);
    genEnemy(0, 2400, 225);
    genEnemy(0, 2400, 400);
    genEnemy(0, 2400, 575);
    
    genEnemy(4, 3000, 50);
    genEnemy(4, 3000, 150);
    genEnemy(4, 3000, 250);
    genEnemy(4, 3000, 350);
    genEnemy(4, 3000, 450);
    genEnemy(4, 3000, 550);
    
    genEnemy(0, 3600, 0);
    genEnemy(0, 3600, 100);
    genEnemy(0, 3600, 200);
    genEnemy(0, 3600, 300);
    genEnemy(0, 3600, 400);
    genEnemy(0, 3600, 500);
    genEnemy(0, 3600, 600);
    
    genEnemy(0, 3700, 0);
    genEnemy(0, 3700, 100);
    genEnemy(0, 3700, 200);
    genEnemy(0, 3700, 300);
    genEnemy(0, 3700, 400);
    genEnemy(0, 3700, 500);
    genEnemy(0, 3700, 600);
    
    genEnemy(0, 3800, 0);
    genEnemy(0, 3800, 100);
    genEnemy(0, 3800, 200);
    genEnemy(0, 3800, 300);
    genEnemy(0, 3800, 400);
    genEnemy(0, 3800, 500);
    genEnemy(0, 3800, 600);
    
    genEnemy(0, 3900, 0);
    genEnemy(0, 3900, 100);
    genEnemy(0, 3900, 200);
    genEnemy(0, 3900, 300);
    genEnemy(0, 3900, 400);
    genEnemy(0, 3900, 500);
    genEnemy(0, 3900, 600);
    
    genEnemy(0, 4000, 0);
    genEnemy(0, 4000, 100);
    genEnemy(0, 4000, 200);
    genEnemy(0, 4000, 300);
    genEnemy(0, 4000, 400);
    genEnemy(0, 4000, 500);
    genEnemy(0, 4000, 600);
    
    genEnemy(0, 4100, 0);
    genEnemy(0, 4100, 100);
    genEnemy(0, 4100, 200);
    genEnemy(0, 4100, 300);
    genEnemy(0, 4100, 400);
    genEnemy(0, 4100, 500);
    genEnemy(0, 4100, 600);
    
    genEnemy(0, 4200, 0);
    genEnemy(0, 4200, 100);
    genEnemy(0, 4200, 200);
    genEnemy(0, 4200, 300);
    genEnemy(0, 4200, 400);
    genEnemy(0, 4200, 500);
    genEnemy(0, 4200, 600);
    
    genEnemy(0, 4300, 0);
    genEnemy(0, 4300, 100);
    genEnemy(0, 4300, 200);
    genEnemy(0, 4300, 300);
    genEnemy(0, 4300, 400);
    genEnemy(0, 4300, 500);
    genEnemy(0, 4300, 600);
    
    genEnemy(0, 4400, 0);
    genEnemy(0, 4400, 100);
    genEnemy(0, 4400, 200);
    genEnemy(0, 4400, 300);
    genEnemy(0, 4400, 400);
    genEnemy(0, 4400, 500);
    genEnemy(0, 4400, 600);
    
    genEnemy(0, 4500, 0);
    genEnemy(0, 4500, 100);
    genEnemy(0, 4500, 200);
    genEnemy(0, 4500, 300);
    genEnemy(0, 4500, 400);
    genEnemy(0, 4500, 500);
    genEnemy(0, 4500, 600);
    
    genEnemy(0, 4600, 0);
    genEnemy(0, 4600, 100);
    genEnemy(0, 4600, 200);
    genEnemy(0, 4600, 300);
    genEnemy(0, 4600, 400);
    genEnemy(0, 4600, 500);
    genEnemy(0, 4600, 600);
    
    genEnemy(0, 4700, 0);
    genEnemy(0, 4700, 100);
    genEnemy(0, 4700, 200);
    genEnemy(0, 4700, 300);
    genEnemy(0, 4700, 400);
    genEnemy(0, 4700, 500);
    genEnemy(0, 4700, 600);
    
    genEnemy(0, 4800, 0);
    genEnemy(0, 4800, 100);
    genEnemy(0, 4800, 200);
    genEnemy(0, 4800, 300);
    genEnemy(0, 4800, 400);
    genEnemy(0, 4800, 500);
    genEnemy(0, 4800, 600);
  } else if (levelIndex == 1) { //miniboss level
    genEnemy(6, 1000, 350);
    genEnemy(6, 800, 150);
    genEnemy(6, 800, 550);
    
    genEnemy(0, 1400, 350);
    genEnemy(0, 1400, 500);
    genEnemy(0, 1400, 200);
    
    genEnemy(3, 1700, 350);
    genEnemy(3, 1750, 400);
    genEnemy(3, 1750, 300);
    genEnemy(3, 1800, 450);
    genEnemy(3, 1800, 250);
    
    genEnemy(6, 2000, 450);
    genEnemy(6, 2050, 500);
    genEnemy(6, 2100, 550);
    
    genEnemy(6, 2200, 250);
    genEnemy(6, 2250, 200);
    genEnemy(6, 2300, 150);
    
    genEnemy(4, 2500, 300);
  } else if (levelIndex == 0) { //opening level
    genEnemy(6, 1000, 400);
    genEnemy(6, 1100, 500);
    genEnemy(6, 1200, 600);
    genEnemy(6, 1500, 300);
    genEnemy(6, 1600, 200);
    genEnemy(6, 1700, 100);
    
    genEnemy(6, 2100, 350);
    genEnemy(6, 2200, 450);
    genEnemy(6, 2200, 250);
    genEnemy(6, 2300, 550);
    genEnemy(6, 2300, 150);
    
    genEnemy(6, 2800, 350);
    genEnemy(6, 2850, 400);
    genEnemy(6, 2850, 300);
    genEnemy(6, 2900, 450);
    genEnemy(6, 2900, 250);
    genEnemy(6, 2950, 500);
    genEnemy(6, 2950, 200);
    genEnemy(6, 3000, 550);
    genEnemy(6, 3000, 150);
    
    genEnemy(6, 3200, 350);
    genEnemy(6, 3300, 450);
    genEnemy(6, 3300, 250);
    genEnemy(6, 3400, 550);
    genEnemy(6, 3400, 150);
    
    genEnemy(6, 3600, 350);
    genEnemy(6, 3650, 400);
    genEnemy(6, 3650, 300);
    genEnemy(6, 3700, 450);
    genEnemy(6, 3700, 250);
    genEnemy(6, 3750, 500);
    genEnemy(6, 3750, 200);
    genEnemy(6, 3800, 550);
    genEnemy(6, 3800, 150);
  } else if (levelIndex == 99) {
    genEnemy(7, 900, 100);
    genEnemy(7, 900, 200);
    genEnemy(7, 900, 300);
    genEnemy(7, 900, 400);
    genEnemy(7, 900, 500);
    genEnemy(7, 900, 600);
  } else if (levelIndex == 2) { //3rd level
    genEnemy(2, 900, 100);
    genEnemy(2, 1100, 300);
    genEnemy(2, 1300, 500);
    
    genEnemy(2, 1600, 500);
    genEnemy(2, 1800, 300);
    genEnemy(2, 2000, 100);
    
    genEnemy(2, 2600, 100);
    genEnemy(2, 2650, 200);
    genEnemy(2, 2600, 300);
    genEnemy(2, 2650, 400);
    genEnemy(2, 2600, 500);
    
    genEnemy(2, 3200, 50);
    genEnemy(2, 3250, 150);
    genEnemy(2, 3200, 250);
    genEnemy(2, 3250, 350);
    genEnemy(2, 3200, 450);
    genEnemy(2, 3250, 550);
    genEnemy(0, 3200, 600);
    
    genEnemy(2, 3600, 100);
    genEnemy(2, 3650, 200);
    genEnemy(2, 3600, 300);
    genEnemy(2, 3650, 400);
    genEnemy(2, 3600, 500);
    
    genEnemy(2, 4200, 500);
    genEnemy(2, 4200, 300);
    genEnemy(2, 4200, 100);
    
    genEnemy(2, 4600, 500);
    genEnemy(2, 4600, 300);
    genEnemy(2, 4600, 100);
    
    genEnemy(2, 5000, 500);
    genEnemy(2, 5000, 300);
    genEnemy(2, 5000, 100);
    
    genEnemy(2, 5600, 100);
    genEnemy(2, 5650, 200);
    genEnemy(2, 5600, 300);
    genEnemy(2, 5650, 400);
    genEnemy(2, 5600, 500);
    genEnemy(0, 5600, 600);
    
    genEnemy(2, 6200, 50);
    genEnemy(2, 6250, 150);
    genEnemy(2, 6200, 250);
    genEnemy(2, 6250, 350);
    genEnemy(2, 6200, 450);
    genEnemy(2, 6250, 550);
    
    genEnemy(2, 6600, 100);
    genEnemy(2, 6650, 200);
    genEnemy(2, 6600, 300);
    genEnemy(2, 6650, 400);
    genEnemy(2, 6600, 500);
    genEnemy(0, 6600, 600);
    
    genEnemy(0, 7200, 500);
    genEnemy(0, 7200, 300);
    genEnemy(0, 7200, 100);
    
    genEnemy(0, 7600, 500);
    genEnemy(0, 7600, 300);
    genEnemy(0, 7600, 100);
    
    genEnemy(0, 8000, 500);
    genEnemy(0, 8000, 300);
    genEnemy(0, 8000, 100);
    
    genEnemy(1, 8600, 100);
    genEnemy(1, 8650, 200);
    genEnemy(1, 8600, 300);
    genEnemy(1, 8650, 400);
    genEnemy(1, 8600, 500);
  }
}

void genEnemy(int type, int x, int y) { //used for placing enemies easier, pass in enemy type and position x/y
  enemyIndex = findEnemy();
  basicE[enemyIndex].enemyState = 0;
  if (type == 0) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = 0;
    basicE[enemyIndex].enemyHitX = 110;
    basicE[enemyIndex].enemyHitY = 110;
    basicE[enemyIndex].enemyHP = 10 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 10 * enemyBalanceHP;
  } else if (type == 1) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 210;
    basicE[enemyIndex].enemyHitY = 86;
    basicE[enemyIndex].enemyHP = 50 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 50 * enemyBalanceHP;
  } else if (type == 2) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 170;
    basicE[enemyIndex].enemyHitY = 70;
    basicE[enemyIndex].enemyHP = 40 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 40 * enemyBalanceHP;
  } else if (type == 3) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 190;
    basicE[enemyIndex].enemyHitY = 58;
    basicE[enemyIndex].enemyHP = 10 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 10 * enemyBalanceHP;
  } else if (type == 4) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 252;
    basicE[enemyIndex].enemyHitY = 102;
    basicE[enemyIndex].enemyHP = 100 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 100 * enemyBalanceHP;
  } else if (type == 6) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 170;
    basicE[enemyIndex].enemyHitY = 70;
    basicE[enemyIndex].enemyHP = 10 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 10 * enemyBalanceHP;
  } else if (type == 7) {
    basicE[enemyIndex].enemyX = x;
    basicE[enemyIndex].enemyY = y;
    basicE[enemyIndex].enemySpeedX = autoScroll;
    basicE[enemyIndex].enemySpeedY = 0;
    basicE[enemyIndex].enemyType = type;
    basicE[enemyIndex].enemyHitX = 120;
    basicE[enemyIndex].enemyHitY = 52;
    basicE[enemyIndex].enemyHP = 20 * enemyBalanceHP;
    basicE[enemyIndex].enemyHPMax = 20 * enemyBalanceHP;
  }
}

void levelEditor() { //the level editor routine is here
  //render background
  if (levelType == 1) background(180, 248, 255);
     else if (levelType == 2) background(0);
     
  //render stars/clouds
  if (levelType == 2 || levelType == 1) {
    for (starsBG stars : stars) {
      stars.update();
      stars.display();
    }
  }
    
  //render and process enemies (enemies will fire once placed)
  for (enemy basicE : basicE) {
    basicE.update();
    basicE.shoot();
    basicE.display();
  }
    
  //render and process bullets
  for (bullet blts : blts) {
    blts.update();
    blts.display();
  }
    
  //render player hp and shield bars
  stroke(0);
  strokeWeight(15);
  fill(0);
  rect(20, 650, 200, 50, 10);
  rect(235, 650, 200, 50, 10);
  setRect(4);
  if (playerHP >= 0) rect(23, 653.5, (195 * (playerHP / playerHPMax)), 44);
  setRect(5);
  rect(238, 653.5, (194 * (playerShield / playerShieldMax)), 44);
  setRect(3); //render surrounds
  noFill();
  rect(20, 650, 200, 50, 10);
  rect(235, 650, 200, 50, 10);
  fill(0);
    
    
  //render weapon selector
  stroke(255);
  strokeWeight(2);
  rect(450, 653, 30, 20, 5);
  rect(450, 678, 30, 20, 5);
  rect(485, 653, 30, 20, 5);
  rect(485, 678, 30, 20, 5);      
    
  image(player1, playerX - 5 - scrollX, playerY - 5); //player sprite
    
  textSize(24);
  fill(255, 20, 20);
  text("scrollX: " + scrollX, 1000, 25);
  text("mouseX: " + mouseX, 1000, 50);
  text("mouseY: " + mouseY, 1000, 75);
  text("enemyType: " + levelEnemyTypeSelected, 1000, 100);
  text("::CONTROLS::", 1000, 125);
  text("LMB = place enemy", 1000, 150);
  text("MMB = reset enemies", 1000, 175);
  text("RMB = undo", 1000, 200);
  text("A/D scroll", 1000, 225);
  text("W/S fast scroll", 1000, 250);
  text("SPACE cycles enemy type", 1000, 275);
  text("P saves to level-editor-save.json", 950, 300);
  text("M exits to level select", 1000, 325);
  text("L loads the save file", 1000, 350);
  text("T tests the level", 1000, 375);
}

void saveLevel() { //saves the level editor level
  levelEditorSaveJSON = new JSONArray();
  for(int i = 0; i < levelEnemyIndex; i++) { //repeat for all 
    JSONObject data = new JSONObject();
    data.setInt("id", i);
    data.setInt("enemyType", levelEnemyType[i]);
    data.setInt("enemyX", levelEnemyX[i]);
    data.setInt("enemyY", levelEnemyY[i]);
    levelEditorSaveJSON.setJSONObject(i, data);
  }
  saveJSONArray(levelEditorSaveJSON, "level-editor-save.json");
  text("saved to level-editor-save.json", 1000, 250);
}

void loadLevel() { //load a saved level editor level
  levelEditorSaveJSON = loadJSONArray("level-editor-save.json"); //load the array
  //JSONArray values = levelEditorSaveJSON.getJSONArray(0);
  levelEnemyIndex = 0; //reset the index
  for (int i = 0; i < levelEditorSaveJSON.size(); i++) {
    JSONObject item = levelEditorSaveJSON.getJSONObject(i);
    levelEnemyType[i] = item.getInt("enemyType");
    levelEnemyX[i] = item.getInt("enemyX");
    levelEnemyY[i] = item.getInt("enemyY");
    levelEnemyIndex++;
  }
  
  //reset player variables
  playerHP = playerHPMax;
  playerX = 200;
  playerY = 250;
  playerShield = 0;
  
  //redraw enemies
  initObjects(); //reset all enemies
  for(int i = 0; i < levelEnemyIndex; i++) {
        genEnemy(levelEnemyType[i], levelEnemyX[i], levelEnemyY[i]);
  }
}
